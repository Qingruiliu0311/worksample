import React, { useState } from "react";
import { Link } from "react-router-dom";
import { useNavigate } from "react-router-dom";
import Homecard from "./Account/Login-icon/Homecard"
import apiClient from "./apiClient";

function Header_login () {
    const Navigate = useNavigate();
    const [showOverlay, setShowOverlay] = useState(false);
    const [selectedCardData, setSelectedCardData] = useState(null);

    const handleOverlayClick = async () => {
      try {
        const response = await apiClient.get("/api/user/details/"); // Replace with your actual API endpoint
        setSelectedCardData(response.data);
        setShowOverlay(true);
        console.log(response)
      } catch (error) {
        console.error("Error fetching selected card data:", error);
      }
    };
  
    const closeOverlay = () => {
      setShowOverlay(false);
      setSelectedCardData(null);
    };

    return (
      
      <div className="containerHeader">
        <Link to="/" style={{ textDecoration: "none", color: "inherit" }}>
            <div className="titleSVGdiv">
              <div className="headerTitleSvgDiv">
                <svg width={40} fill="#000000" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g id="Beer_Mug_Full" data-name="Beer Mug Full"> <g> <path d="M18.356,9.63h-.97V7.99a2.938,2.938,0,0,0,.5-1.65,1.77,1.77,0,0,0-.01-.23,2.905,2.905,0,0,0-1.64-2.38,2.956,2.956,0,0,0-2.4-.07,3.278,3.278,0,0,0-5.62,0,2.9,2.9,0,0,0-1.68-.17,2.866,2.866,0,0,0-2.16,1.75,2.948,2.948,0,0,0,.3,2.77V19.43a2.5,2.5,0,0,0,2.5,2.5h7.71a2.5,2.5,0,0,0,2.5-2.5v-.99l.91-.36a2.433,2.433,0,0,0,1.54-2.27V11.1A1.481,1.481,0,0,0,18.356,9.63Zm-1.97,9.8a1.5,1.5,0,0,1-1.5,1.5H7.176a1.5,1.5,0,0,1-1.5-1.5V11.34a2.858,2.858,0,0,0,1.93.74c.13,0,.25-.01.37-.02V18.4a.5.5,0,0,0,.5.5.5.5,0,0,0,.5-.5V11.82a.17.17,0,0,0-.01-.07,2.939,2.939,0,0,0,1.57-2.46h4.42a2.86,2.86,0,0,0,1.43-.38Zm-.01-11.77a1.949,1.949,0,0,1-1.42.63h-4.61a.8.8,0,0,0-.79.61,1.231,1.231,0,0,0-.02.2,1.975,1.975,0,0,1-1.05,1.78,1.934,1.934,0,0,1-2.8-1.72,1.808,1.808,0,0,1,.17-.77.6.6,0,0,0-.13-.68,1.939,1.939,0,0,1-.41-2.11,1.868,1.868,0,0,1,1.4-1.13,2.531,2.531,0,0,1,.38-.03,1.909,1.909,0,0,1,.86.2.766.766,0,0,0,.59.06A.8.8,0,0,0,9,4.32a2.273,2.273,0,0,1,4.06,0,.751.751,0,0,0,.44.38.8.8,0,0,0,.59-.05,1.917,1.917,0,0,1,2.79,1.54A1.886,1.886,0,0,1,16.376,7.66Zm2.46,8.15a1.428,1.428,0,0,1-.92,1.34l-.52.22V10.63h.96a.478.478,0,0,1,.48.47Z"></path> <path d="M13.577,18.9a.5.5,0,0,1-.5-.5V11.82a.5.5,0,0,1,1,0V18.4A.5.5,0,0,1,13.577,18.9Z"></path> </g> </g> </g></svg>
              </div>
              <div className="headerTitleDiv">
                <h1 className='headertitle'>INVITE</h1>
              </div>
            </div>
        </Link>

        <div className="menuSVGcontainer">
          <div className="menuSVGdiv">
            <span class="material-symbols-outlined" onClick={handleOverlayClick}>
              <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
    <path d="M17.75 15.375H22.5V14.5H17.75V15.375ZM17.75 12H22.5V11.125H17.75V12ZM7.5 18.875H15.25V18.8125C15.25 18.1458 14.9115 17.6354 14.2344 17.2812C13.5573 16.9271 12.6042 16.75 11.375 16.75C10.1458 16.75 9.19271 16.9271 8.51562 17.2812C7.83854 17.6354 7.5 18.1458 7.5 18.8125V18.875ZM11.375 14.5C11.8542 14.5 12.2552 14.3385 12.5781 14.0156C12.901 13.6927 13.0625 13.2917 13.0625 12.8125C13.0625 12.3333 12.901 11.9323 12.5781 11.6094C12.2552 11.2865 11.8542 11.125 11.375 11.125C10.8958 11.125 10.4948 11.2865 10.1719 11.6094C9.84896 11.9323 9.6875 12.3333 9.6875 12.8125C9.6875 13.2917 9.84896 13.6927 10.1719 14.0156C10.4948 14.3385 10.8958 14.5 11.375 14.5ZM6 23.375C5.45833 23.375 5.01042 23.1979 4.65625 22.8438C4.30208 22.4896 4.125 22.0417 4.125 21.5V8.5C4.125 7.95833 4.30208 7.51042 4.65625 7.15625C5.01042 6.80208 5.45833 6.625 6 6.625H24C24.5417 6.625 24.9896 6.80208 25.3438 7.15625C25.6979 7.51042 25.875 7.95833 25.875 8.5V21.5C25.875 22.0417 25.6979 22.4896 25.3438 22.8438C24.9896 23.1979 24.5417 23.375 24 23.375H6ZM6 22.5H24C24.25 22.5 24.4792 22.3958 24.6875 22.1875C24.8958 21.9792 25 21.75 25 21.5V8.5C25 8.25 24.8958 8.02083 24.6875 7.8125C24.4792 7.60417 24.25 7.5 24 7.5H6C5.75 7.5 5.52083 7.60417 5.3125 7.8125C5.10417 8.02083 5 8.25 5 8.5V21.5C5 21.75 5.10417 21.9792 5.3125 22.1875C5.52083 22.3958 5.75 22.5 6 22.5Z" fill="black"/>
  </svg>
            </span>
            <span class="material-symbols-outlined" onClick={()=>{Navigate("/Wallet")}}>
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
  <path d="M7.5 23.375C6.5625 23.375 5.76562 23.0469 5.10938 22.3906C4.45312 21.7344 4.125 20.9375 4.125 20V10C4.125 9.0625 4.45312 8.26562 5.10938 7.60938C5.76562 6.95312 6.5625 6.625 7.5 6.625H22.5C23.4375 6.625 24.2344 6.95312 24.8906 7.60938C25.5469 8.26562 25.875 9.0625 25.875 10V20C25.875 20.9375 25.5469 21.7344 24.8906 22.3906C24.2344 23.0469 23.4375 23.375 22.5 23.375H7.5ZM7.5 10.8125H22.5C23 10.8125 23.4635 10.9062 23.8906 11.0938C24.3177 11.2812 24.6875 11.5521 25 11.9062V10C25 9.3125 24.7552 8.72396 24.2656 8.23438C23.776 7.74479 23.1875 7.5 22.5 7.5H7.5C6.8125 7.5 6.22396 7.74479 5.73438 8.23438C5.24479 8.72396 5 9.3125 5 10V11.9062C5.3125 11.5521 5.68229 11.2812 6.10938 11.0938C6.53646 10.9062 7 10.8125 7.5 10.8125ZM5 14.0312L19.25 17.5C19.3958 17.5417 19.5469 17.5469 19.7031 17.5156C19.8594 17.4844 19.9896 17.4167 20.0938 17.3125L24.8438 13.2812C24.6771 12.8021 24.3802 12.4167 23.9531 12.125C23.526 11.8333 23.0417 11.6875 22.5 11.6875H7.5C6.83333 11.6875 6.26042 11.9115 5.78125 12.3594C5.30208 12.8073 5.04167 13.3646 5 14.0312Z" fill="black"/>
</svg>
            </span>
            <span class="material-symbols-outlined">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill="none">
  <path d="M6.25 23.4616V22.2116H8.26937V12.3078C8.26937 10.6747 8.78615 9.23833 9.81969 7.99875C10.8534 6.75917 12.1635 5.98719 13.75 5.68281V5C13.75 4.65271 13.8713 4.3576 14.1138 4.11469C14.3563 3.87156 14.6507 3.75 14.9972 3.75C15.3436 3.75 15.6391 3.87156 15.8834 4.11469C16.1278 4.3576 16.25 4.65271 16.25 5V5.68281C17.8365 5.98719 19.1466 6.75917 20.1803 7.99875C21.2139 9.23833 21.7306 10.6747 21.7306 12.3078V22.2116H23.75V23.4616H6.25ZM14.9956 26.7306C14.4392 26.7306 13.9643 26.5329 13.5709 26.1375C13.1774 25.7421 12.9806 25.2668 12.9806 24.7116H17.0194C17.0194 25.2709 16.8211 25.7473 16.4247 26.1406C16.0284 26.534 15.5521 26.7306 14.9956 26.7306ZM9.51937 22.2116H20.4806V12.3078C20.4806 10.7884 19.947 9.4951 18.8797 8.42781C17.8124 7.36052 16.5192 6.82688 15 6.82688C13.4808 6.82688 12.1876 7.36052 11.1203 8.42781C10.053 9.4951 9.51937 10.7884 9.51937 12.3078V22.2116Z" fill="black"/>
</svg>
            </span>
          </div>
        </div>

      {/* Render the Overlay */}
      {showOverlay && selectedCardData && (
        <div className="cardOverlay" onClick={closeOverlay}>
          <div className="overlayContent" onClick={(e) => e.stopPropagation()}>
            <Homecard
              styleType={selectedCardData.card_type}
              userData={selectedCardData}
            />
          </div>
        </div>
      )}

      </div>
    )
}

export default Header_login;